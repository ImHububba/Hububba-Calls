:root{
  --bg:#0f141a; --panel:#141b23; --text:#d8e0ea; --muted:#8aa0b6;
  --brand:#8ac6ff; --accent:#4da3ff; --line:#1f2a38; --danger:#d9534f; --glow: rgba(77,163,255,.6);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font:14px/1.5 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
}

.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px; border-bottom:1px solid var(--line); background:#0c1117; position:sticky; top:0; z-index:10;
}
.brand{font-weight:800; letter-spacing:0.2px}
.brand span{color:var(--brand)}
.roombar{display:flex; gap:10px; align-items:center; opacity:.9}
.timer{color:var(--muted)}
.actions button{margin-left:8px}

.layout{display:grid; grid-template-columns:280px 1fr; height:calc(100vh - 54px)}
.sidebar{padding:16px; border-right:1px solid var(--line); overflow:auto}
.content{padding:16px; overflow:auto}

h4{margin:0 0 8px 0; color:#a7b6c8}
section{margin-bottom:18px}
input{width:100%; background:#0e141a; color:var(--text); border:1px solid var(--line); border-radius:8px; padding:10px}
button{
  background:var(--panel); color:var(--text); border:1px solid var(--line); border-radius:10px; padding:8px 12px; cursor:pointer;
}
button:disabled{opacity:.4; cursor:not-allowed}
button.danger{border-color:#7a2b28; background:#2a1414; color:#ffd6d4}
.icon-btn{background:transparent; border:1px solid var(--line); border-radius:8px; color:var(--text); padding:4px 8px; cursor:pointer}

.row{display:flex; gap:8px; margin-top:8px}

.panel{margin-bottom:18px}

/* Stage layout */
.stage{
  display:grid;
  gap:12px;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  align-content:start;
}
.tile{
  position:relative; background:#000; border:1px solid var(--line); border-radius:12px; overflow:hidden;
  aspect-ratio:16/9; transition:border-color .12s ease, box-shadow .12s ease;
}
.tile.speaking{
  border-color: var(--accent);
  box-shadow: 0 0 0 2px var(--accent), 0 0 22px var(--glow) inset;
}
.tile video{width:100%; height:100%; object-fit:cover; background:#000}
.name-label{
  position:absolute; left:10px; bottom:10px; padding:4px 8px; border-radius:8px;
  background:rgba(0,0,0,.5); color:#fff; font-weight:600; font-size:12px;
}
.name-label .op{
  display:inline-block; margin-left:6px; padding:2px 6px; border-radius:6px;
  background:var(--danger); color:#fff; font-weight:800; font-size:11px;
}
.tile .kick{
  position:absolute; right:8px; top:8px;
  background:#2a1414; color:#ffd6d4; border:1px solid #7a2b28; border-radius:8px; padding:4px 8px; cursor:pointer; font-size:12px;
}

.rooms{list-style:none; padding:0; margin:0}
.rooms li{padding:6px 0; border-bottom:1px dashed var(--line); color:var(--muted)}
.rooms b{color:var(--text)}
.error{margin-top:8px; padding:8px 10px; border:1px solid #a33; color:#ffd7d7; background:#2a0f12; border-radius:8px}
.madeby{opacity:.6; margin-top:24px; font-size:12px}

.toast{
  position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
  background:#16202b; border:1px solid var(--line); color:#fff;
  padding:10px 14px; border-radius:10px; pointer-events:none; opacity:0; transition:opacity .15s ease;
}
.toast.show{opacity:1}

/* Modal */
.modal{position:fixed; inset:0; display:none}
.modal.open{display:block}
.modal__backdrop{position:absolute; inset:0; background:rgba(0,0,0,.5)}
.modal__body{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width:min(92vw,460px); background:#101820; border:1px solid var(--line); border-radius:16px; overflow:hidden;
}
.modal__header{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--line)}
.modal__title{font-weight:700}
.modal__content{padding:14px}
.modal__footer{padding:12px 14px; border-top:1px solid var(--line); text-align:right}
.codebox{
  margin-top:8px; padding:12px; background:#0d141b; border:1px dashed var(--line); border-radius:10px; color:#cfe3ff;
  word-break:break-word;
}

/* Chat */
.chat-panel .chat{
  height: 280px;
  border:1px solid var(--line);
  border-radius:12px;
  background:#0d1418;
  padding:10px;
  overflow:auto;
}
.msg{margin:6px 0; display:flex; gap:8px; align-items:flex-start}
.msg .bubble{
  background:#121e28; border:1px solid var(--line); border-radius:10px; padding:8px 10px; max-width:75%;
  word-break: break-word;
}
.msg.me .bubble{border-color:#23486e; background:#0f1a24}
.msg .meta{font-size:11px; color:#8ea4b9; margin-bottom:3px}
.msg .name{font-weight:700; color:#dce8f6}
.msg .name .op{
  display:inline-block; margin-left:6px; padding:1px 5px; border-radius:6px;
  background:var(--danger); color:#fff; font-weight:800; font-size:10px;
}
.msg.system{justify-content:center}
.msg.system .bubble{background:transparent; border:1px dashed var(--line); color:#9fb3c9}

.chat-input-row{display:flex; gap:8px; margin-top:8px}
.chat-input-row input{flex:1}
